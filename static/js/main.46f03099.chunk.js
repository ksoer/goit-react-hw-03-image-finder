(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{2:function(e,t,a){e.exports={App:"styles_App__3m_Fz",Searchbar:"styles_Searchbar__1kOZ1",SearchForm:"styles_SearchForm__1uinL",SearchForm_button:"styles_SearchForm_button__5sS-q",SearchForm_button_label:"styles_SearchForm_button_label__3eUyo",SearchForm_input:"styles_SearchForm_input__lYHx1",ImageGallery:"styles_ImageGallery__2jByQ",ImageGalleryItem:"styles_ImageGalleryItem__MCVXv",ImageGalleryItem_image:"styles_ImageGalleryItem_image__3YGPp",Overlay:"styles_Overlay__1o1KB",Modal:"styles_Modal__1lfwa",Button:"styles_Button__1pR2I"}},26:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(9),c=a.n(o),l=(a(26),a(11)),s=a(5),i=a(6),u=a(8),h=a(7),d=a(2),m=a.n(d),p=a(0),b=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={inputSearch:""},e.handleInputChange=function(t){e.setState({inputSearch:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.onSubmit)(e.state.inputSearch),e.reset()},e.reset=function(){e.setState({inputSearch:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:m.a.Searchbar,children:Object(p.jsxs)("form",{className:m.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(p.jsx)("button",{type:"submit",className:m.a.SearchForm_button,children:Object(p.jsx)("span",{className:m.a.SearchForm_button_label,children:"Search"})}),Object(p.jsx)("input",{className:m.a.SearchForm_input,type:"text",value:this.state.inputSearch,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleInputChange})]})})}}]),a}(n.Component),y=a(20),g=a.n(y);function j(){return Object(p.jsx)("div",{className:m.a.Button,children:Object(p.jsx)(g.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80})})}var f=document.querySelector("#rootModal"),_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeydown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(p.jsx)("div",{className:m.a.Overlay,onClick:this.handleOverlayClick,children:Object(p.jsxs)("div",{className:m.a.Modal,children:[" ",this.props.children]})}),f)}}]),a}(n.Component);var O=function(e){var t=e.picture,a=e.onOpenPicture;return Object(p.jsx)("li",{className:m.a.ImageGalleryItem,onClick:function(){a(t)},children:Object(p.jsx)("img",{src:t.webformatURL,alt:t.tags,className:m.a.ImageGalleryItem_image})})};var v=function(e){var t=e.gallery,a=e.onOpenPicture;return Object(p.jsx)("ul",{className:m.a.ImageGallery,children:t.map((function(e){return Object(p.jsx)(O,{picture:e,onOpenPicture:a},e.id)}))})};function S(e){var t=e.onLoadMore;return Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsx)("button",{className:m.a.Button,type:"button",onClick:t,children:"Load More"})})}var w=a(21),x=a.n(w),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="https://pixabay.com/api/",n="18667452-b6cf3b15ecb06490e1251bb0b";return x.a.get("".concat(a,"?key=").concat(n,"&per_page=12&page=").concat(t,"&q=").concat(e)).then((function(e){return e.data}))},M=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={gallery:[],searchQuery:"",page:1,showModal:!1,showLoader:!1,error:null,largeImage:{},total:0},e.fetchGallary=function(){var t=e.state,a=t.searchQuery,n=t.page;e.setState({showLoader:!0}),I(a,n).then((function(t){var a=t.hits,n=t.total;e.setState((function(e){return{gallery:[].concat(Object(l.a)(e.gallery),Object(l.a)(a)),page:e.page+1,total:n}})),e.scrollToDown()})).catch((function(t){return e.setState({error:t})})).finally((function(){return e.setState({showLoader:!1})}))},e.scrollToDown=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e.handleFormSubmit=function(t){e.state.searchQuery!==t&&e.setState({searchQuery:t,gallery:[],page:1})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.handleOpenPicture=function(t){e.setState({largeImage:t}),e.toggleModal()},e.showLoadMore=function(){var t=e.state,a=t.total,n=t.page;return Math.ceil(a/12)!==n-1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({showLoader:!0}),this.fetchGallary()}},{key:"componentDidUpdate",value:function(e,t){t.searchQuery!==this.state.searchQuery&&this.fetchGallary()}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.showLoader,n=e.showModal,r=e.gallery,o=e.largeImage,c=this.showLoadMore();return Object(p.jsxs)("div",{className:m.a.App,children:[Object(p.jsx)(b,{onSubmit:this.handleFormSubmit}),t&&Object(p.jsx)("p",{children:t.message}),r.length>0&&Object(p.jsx)(v,{gallery:r,onOpenPicture:this.handleOpenPicture}),a&&Object(p.jsx)(j,{}),r.length>0&&!a&&c&&Object(p.jsx)(S,{onLoadMore:this.fetchGallary}),n&&Object(p.jsx)(_,{onClose:this.toggleModal,children:Object(p.jsx)("img",{src:o.largeImageURL,alt:o.tags})})]})}}]),a}(n.Component);c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(M,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.46f03099.chunk.js.map